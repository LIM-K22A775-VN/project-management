extends ../../layouts/default.pug
include ../../mixins/box-head.pug
include ../../mixins/alert.pug

block main
  .container.my-3
    .row
      .col-12
        +box-head("Giỏ hàng")

    .row
      .col-12
        table.table.table-bordered.align-middle
          thead.table-light
            tr
              th(scope="col") STT
              th(scope="col") Ảnh
              th(scope="col") Tên
              th(scope="col") Giá
              th(scope="col") Số lượng
              th(scope="col") Tổng tiền
              th(scope="col") Hành động
          tbody
            if(cartDetail.products.length > 0)
                each item , index in cartDetail.products
                  tr      
                    td #{index+1}
                    td
                        img(src= item.productInfo.thumbnail, alt=item.productInfo.title, width="80")
                    td
                        a.text-decoration-none(href=`/products/detail/${item.productInfo.slug}`) #{item.productInfo.title}
                    td #{item.productInfo.priceNew}$
                    td
                        input.form-control(
                        type="number"
                        name="quantity"
                        value= item.quantity
                        min="1"
                        data-item-id= item.product_id
                        style="width: 80px"
                        )
                    td #{item.totalPrice}$
                    td
                        a.btn.btn-danger.btn-sm(href=`/cart/delete/${item.product_id}`) Xóa
            else 
               p Không có sản phẩm nào trong giỏ hàng.
    h3.text-end.mt-4 Tổng đơn hàng: #{cartDetail.totalPrice}$
    .text-end.mt-3
      a.btn.btn-success(href="/checkout") Thanh toán
