extends ../../layouts/default.pug

include ../../mixins/box-head.pug
include ../../mixins/alert.pug

block main
  +alert-success(5000)
  +alert-error(5000)

  .container.my-3
    .row
      .col-12
        +box-head('Đặt hàng')
    .row
      .col-12
        table.table.table-bordered.align-middle
          thead.table-light
            tr
              th(scope="col") STT
              th(scope="col") Ảnh
              th(scope="col") Tên
              th(scope="col") Giá
              th(scope="col") Số lượng
              th(scope="col") Tổng tiền
          tbody
            if cartDetail.products.length > 0
              each item, index in cartDetail.products
                tr
                  td #{index + 1}
                  td
                    img(src=item.productInfo.thumbnail, alt=item.productInfo.title, width="80")
                  td #{item.productInfo.title}              
                  td #{item.productInfo.priceNew}$
                  td #{item.quantity}
                  td #{item.totalPrice}$
            else
              tr
                td(colspan="6").text-center Không có sản phẩm nào trong giỏ hàng.

    h3.text-end.mt-4 Tổng đơn hàng: #{cartDetail.totalPrice}$

    if cartDetail.products.length > 0
      .row
        .col-12
          .card.p-4.my-4
            form(action="/checkout/order", method="POST")
              .mb-3
                label(for="fullName").form-label Họ tên
                input#fullName.form-control(type="text", name="fullName", required)
              .mb-3
                label(for="phone").form-label Số điện thoại
                input#phone.form-control(type="text", name="phone", required)
              .mb-3
                label(for="address").form-label Địa chỉ
                input#address.form-control(type="text", name="address", required)
              button.btn.btn-success.w-100(type="submit") Đặt hàng
